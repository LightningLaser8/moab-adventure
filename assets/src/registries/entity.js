//### PLAYER ###
Registry.entities.add("player", {
  type: "Entity",
  x: 300,
  y: 540,
  team: "player",
  deathSound: "player-death",
  shieldDamageOverride: 1,
});
Registry.entities.add("support", {
  type: "Entity",
  x: 300,
  y: 740,
  team: "player",
  trackTarget: true,
  trackingOffsetX: -300,
  trackingOffsetY: 150,
  turnSpeed: 6,
  speed: 2,
  collides: false,
});
//### BOXES ###
Registry.entities.add("wooden-box", {
  type: "box",
  name: "Wooden Box",
  drawer: {
    image: "box.wood",
    width: 50,
    height: 50,
  },
  hitSize: 25,
  x: 1920,
  //Return a random height each time
  get y() {
    return random(0, 1080);
  },
  reward: 2,

  destroyReward: 5,

  team: "enemy",
  health: 4,
  healthIncrease: 1,
  hitSound: "wood-hit",
  deathSound: "wood-break",
});
Registry.entities.add("metal-box", {
  type: "box",
  name: "Metal Box",
  drawer: {
    image: "box.metal",
    width: 50,
    height: 50,
  },
  hitSize: 25,
  resistances: [
    {
      type: "ballistic",
      amount: 1, //100% resistance
    },
    {
      type: "laser",
      amount: 0.3, //30% resistance
    },
    {
      type: "fire",
      amount: 0.7, //70% resistance
    },
  ],
  x: 1920,
  //Return a random height each time
  get y() {
    return random(0, 1080);
  },
  reward: 2,

  destroyReward: 10, //Worth more

  team: "enemy",
  health: 16, //More HP
  healthIncrease: 2,
  hitSound: "metal-hit-low",
  deflectSound: "metal-hit",
  deathSound: "metal-break",
});
Registry.entities.add("hardwood-box", {
  type: "box",
  name: "Hardwood Box",
  drawer: {
    image: "box.hardwood",
    width: 50,
    height: 50,
  },
  hitSize: 25,
  x: 1920,
  resistances: [
    {
      type: "ballistic",
      amount: 0.5,
    },
  ],
  //Return a random height each time
  get y() {
    return random(0, 1080);
  },
  reward: 2,

  destroyReward: 5,

  team: "enemy",
  health: 5,
  healthIncrease: 1.25,
  hitSound: "wood-hit",
  deathSound: "wood-break",
});
Registry.entities.add("robox", {
  type: "shooting-box",
  name: "Robox",
  drawer: {
    image: "box.robox",
    width: 50,
    height: 50,
  },
  hitSize: 25,
  resistances: [
    {
      type: "ballistic",
      amount: 0.8,
    },
    {
      type: "laser",
      amount: 0.5,
    },
    {
      type: "electric",
      amount: 1,
    },
  ],
  weaponSlots: [
    {
      posX: 0,
      posY: 0,
      upgrades: [".robox-gun"],
      tier: 1,
    },
  ],
  x: 1920,
  //Return a random height each time
  get y() {
    return random(0, 1080);
  },
  reward: 2,

  destroyReward: 10,

  team: "enemy",
  health: 20,
  healthIncrease: 5,
  hitSound: "metal-hit-low",
  deathSound: "metal-break",
});
//### BOSSES ###
Registry.entities.add("gigantic-box", {
  type: "boss",
  name: "Gigantic Box",
  drawer: {
    image: "box.wood",
    width: 200,
    height: 200,
  },
  imposDrawer: {
    image: "box.hardwood",
    width: 200,
    height: 200,
  },
  hitSize: 100,
  direction: 180,
  speed: 4,
  x: 1920,
  //Return a random height each time
  get y() {
    return random(0, 1080);
  },
  reward: 100,

  actions: {
    charge: {
      type: "action.move",
      duration: 20,
      x: -250,
    },
    spin: {
      type: "action.move",
      rot: 140,
      duration: 8,
    },
    bonk: {
      type: "action.fire-weapon",
      slotIndex: 0,
    },
    "bonk-impos": {
      type: "action.fire-weapon",
      slotIndex: 1,
    },
    wait: {
      type: "action.generic",
      duration: 180,
    },
    "wait-short": {
      type: "action.generic",
      duration: 60,
    },
    "spin-attack": {
      type: "action.multi",
      actions: ["spin", "pain", "summonU", "summonD", "summon"],
      duration: 8,
    },
    pain: {
      type: "action.fire-weapon",
      slotIndex: 2,
    },
    summon: {
      type: "action.summon",
      entity: "wooden-box",
      duration: 0,
    },
    summonU: {
      type: "action.summon",
      entity: "metal-box",
      offsetY: -60,
      duration: 0,
    },
    summonD: {
      type: "action.summon",
      entity: "metal-box",
      offsetY: 60,
      duration: 0,
    },
    summonRand: {
      type: "action.summon",
      entity: "wooden-box",
      duration: 0,
      count: 4,
      offsetX: 1920,
      offsetY: 540,
      randomOffsetY: 540,
      isPositionAbsolute: true,
    },
    aim: {
      type: "action.disable-ai",
      // speed: 0,
      // turnSpeed: 0,
      // changesBack: false,
    },
    normal: {
      type: "action.enable-ai",
      // speed: 8,
      // turnSpeed: 4,
      // changesBack: false,
    },
    "feck-off": {
      type: "action.move",
      duration: 20,
      x: -350,
    },
    leave: {
      type: "action.spare",
      unlockedWeapon: "boxer"
    },
    stop: {
      type: "action.disable-ai",
      duration: 0,
      // speed: 0,
      // turnSpeed: 0,
      // changesBack: false,
    },
  },
  weaponSlots: [
    {
      upgrades: [".box-impact"],
      tier: 1,
    },
    {
      upgrades: [".box-impact-impos"],
      tier: 1,
    },
    {
      upgrades: [".box-rotary-pain"],
      tier: 1,
    },
  ],
  triggers: [
    {
      type: "trigger.multi-hp",
      actionName: "summonRand",
      inclusive: false,
      divisions: 20,
    },
    {
      type: "trigger.action-ended",
      actionName: "spin",
      actionEnding: "summonRand",
    },
    {
      type: "trigger.h-pos",
      actionName: "stop",
      x: 150,
      invertDetection: true,
    },
    {
      type: "trigger.action-ended",
      actionEnding: "stop",
      actionName: "feck-off",
    },
    {
      type: "trigger.action-ended",
      actionEnding: "feck-off",
      actionName: "leave",
    },
  ],
  sequence: ["wait", "charge", "bonk"],
  imposSequence: [
    "normal",
    "wait-short",
    "charge",
    "bonk-impos",
    "wait-short",
    "charge",
    "bonk-impos",
    "wait-short",
    "charge",
    "bonk-impos",
    "wait-short",
    "aim",
    "15*spin-attack",
  ],
  team: "enemy",
  health: 200,
  healthIncrease: 200,
  trackingOffsetX: 200,
  turnWhileMoving: true,
  turnSpeed: 10,
  hitSound: "wood-hit",
  deathSound: "boss-death",
});

Registry.entities.add("monkey-ace", {
  type: "boss",
  name: "Monkey Ace",
  drawer: {
    image: "boss.monkey-ace",
    width: 272,
    height: 336,
  },
  imposDrawer: {
    image: "boss.monkey-ace.impos",
    width: 272,
    height: 336,
  },
  hitSize: 136,
  x: 0,
  y: 540,
  reward: 100,

  weaponSlots: [
    {
      posX: 0,
      posY: 0,
      upgrades: [".ace-radial-gun"],
      tier: 1,
    },
    {
      posX: 100,
      posY: 0,
      upgrades: [".ace-gatling-gun"],
      tier: 1,
    },
    {
      posX: 0,
      posY: 0,
      upgrades: [".ace-radial-gun-impos"],
      tier: 1,
    },
  ],
  actions: {
    fire: {
      type: "action.fire-weapon",
      slotIndex: 0,
    },
    "fire-impos": {
      type: "action.fire-weapon",
      slotIndex: 2,
    },
    gatling: {
      type: "action.fire-weapon",
      slotIndex: 1,
    },
    wait: {
      type: "action.generic",
      duration: 60,
    },
    "wait-short": {
      type: "action.generic",
      duration: 5,
    },
    "wait-less-short": {
      type: "action.generic",
      duration: 30,
    },
    reverse: {
      type: "action.move",
      duration: 30,
      x: -400,
    },
    "mini-ace": {
      type: "action.summon",
      entity: "mini-ace",
      duration: 0,
      max: 4,
    },
  },
  sequence: [
    "wait",
    "fire",
    "wait",
    "fire",
    "wait",
    "fire",
    "wait",
    "fire",
    "wait",
    "reverse",
    //brrrr
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
  ],
  imposSequence: [
    "wait-less-short",
    "fire-impos",
    "wait-less-short",
    "fire-impos",
    "wait-less-short",
    "fire-impos",
    "wait-less-short",
    "fire-impos",
    "wait-less-short",
    "reverse",
    "mini-ace",
    "wait-short",
    "wait-short",
    "mini-ace",
    "wait-less-short",
    //brrrr
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
    "wait-short",
    "gatling",
  ],
  bounceable: false,
  team: "enemy",
  health: 100,
  healthIncrease: 150,
  trackingOffsetX: -500, // Try to stay behind blimp
  turnWhileMoving: true, //Face where it's going
  turnSpeed: 2, //planes don't turn very fast
  speed: 12, //but are fast
  hitSound: "metal-hit",
  deathSound: "boss-death",
});
Registry.entities.add("mini-ace", {
  type: "boss",
  name: "Mini Ace",
  dv: 0,
  isMinion: true,
  bounceable: false,
  drawer: {
    image: "minion.plane",
    width: 68,
    height: 84,
  },
  hitSize: 34,
  weaponSlots: [
    {
      posX: 25,
      posY: 0,
      upgrades: [".mini-ace-gatling-gun"],
      tier: 1,
    },
  ],
  actions: {
    gatling: {
      type: "action.fire-weapon",
      slotIndex: 0,
    },
    wait: {
      type: "action.generic",
      duration: 180,
    },
    "wait-short": {
      type: "action.generic",
      duration: 5,
    },
    leave: {
      type: "action.move",
      duration: 1,
      x: 30000,
    },
    enter: {
      type: "action.entry",
      x: 1920,
    },
    charge: {
      type: "action.spawn-bullet",
      x: 1980,
      y: 540,
      yVar: 540,
      xVar: 60,
      direction: 180,
      bullet: {
        drawer: {
          image: "boss.monkey-ace",
          width: 68,
          height: 84,
        },
        speed: 40,
        lifetime: 60,
        collides: false,
        trail: false,
        intervalTime: 10,
        intervalNumber: 1,
        intervalSpread: 360,
        intervalBullet: {
          lifetime: 35,
          speed: 1,
          collides: false,
          pierce: 100,
          trail: false,
          damage: [
            {
              type: "explosion",
              amount: 10,
              levelScaling: 5,
              area: 75,
            },
          ],
          drawer: {
            image: "bullet.bomb",
            width: 16,
            height: 16,
          },
        },
        telegraph: {
          time: 45,
          width: 34,
        },
      },
    },
  },
  sequence: [
    "wait",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "wait-short",
    "wait-short",
    "gatling",
    "leave",
    "charge",
    "wait",
    "enter",
  ],
  team: "enemy",
  health: 50,
  healthIncrease: 25,
  trackingOffsetX: -300, // Try to stay behind blimp, but closer
  turnWhileMoving: true, //Face where it's going
  turnSpeed: 3, //planes don't turn very fast, but small better
  speed: 15, //and are faster
  hitSound: "metal-hit",
  deathSound: "explosion",
});

Registry.entities.add("super-monkey", {
  type: "boss",
  name: "Super Monkey",
  drawer: {
    image: "boss.super-monkey",
    width: 276,
    height: 160,
  },
  imposDrawer: {
    image: "boss.super-monkey.impos",
    width: 276,
    height: 160,
  },
  bounceable: true,
  shieldDamageOverride: 10,
  shieldReboundOverride: 30,
  hitSize: 120,
  direction: 180,
  speed: 32,
  x: 1920,
  //Return a random height each time
  get y() {
    return random(0, 1080);
  },
  reward: 100,

  actions: {
    charge: {
      type: "action.move",
      duration: 70,
      x: -3000,
    },
    leave: {
      type: "action.move",
      duration: 1,
      x: 30000,
    },
    enter: {
      type: "action.entry",
      x: 1920,
    },
    "dart-throw": {
      type: "action.fire-weapon",
      slotIndex: 0,
    },
    "laser-shoot": {
      type: "action.fire-weapon",
      slotIndex: 1,
    },
    wait: {
      type: "action.generic",
      duration: 180,
    },
    "wait-s": {
      type: "action.generic",
      duration: 120,
    },
    "false-charge": {
      type: "action.spawn-bullet",
      x: 1980,
      y: 540,
      yVar: 540,
      xVar: 60,
      direction: 180,
      bullet: {
        drawer: {
          image: "boss.super-monkey",
          width: 276,
          height: 160,
        },
        speed: 80,
        lifetime: 30,
        collides: false,
        trail: false,
        intervalTime: 5,
        intervalNumber: 4,
        intervalSpacing: 90,
        intervalBullet: {
          lifetime: 35,
          speed: 45,
          hitSize: 15,
          trail: true,
          trailLifeFactor: 0.4,
          trailColour: [255, 0, 0],
          damage: [
            {
              type: "laser",
              amount: 20,
              levelScaling: 10,
            },
            {
              type: "no",
              amount: 0,
              area: 100,
              smokeColour: [0, 0, 0, 0],
              smokeColourTo: [0, 0, 0, 0],
              waveColour: [255, 255, 255, -2000],
              sparkColour: [255, 100, 100],
              sparkColourTo: [255, 0, 0, 0],
            },
          ],
          drawer: {
            shape: "ellipse",
            fill: "red",
            width: 32,
            height: 16,
          },
          telegraph: {
            time: 30,
          },
        },
      },
    },
    "laser-rotation": {
      type: "action.spawn-bullet",
      x: 960,
      y: 540,
      bullet: {
        speed: 0,
        lifetime: 1,
        hitSize: 0,
        pierce: 100,
        fragNumber: 2,
        fragSpacing: 180,
        fragDirection: 90,
        fragBullet: {
          rotateSpeed: 2,
          type: "continuous-laser",
          spawnSound: "laser-beam",
          lifetime: 180,
          length: 1000,
          pierce: 999,
          hitSize: 15,
          drawer: {
            shape: "rect",
            fill: [255, 0, 0],
          },
          damage: [
            {
              amount: 1,
              levelScaling: 1,
              type: "laser",
            },
          ],
          telegraph: {
            time: 30,
          },
        },
        pattern: {},
      },
    },
  },
  weaponSlots: [
    {
      upgrades: [".super-monkey-throw"],
      tier: 1,
    },
    {
      upgrades: [".super-monkey-shoot-laser"],
      tier: 1,
    },
  ],
  sequence: [
    "charge",
    "leave",
    "wait",
    "enter",
    "dart-throw",
    "wait",
    "wait",
    "dart-throw",
    "wait",
    "dart-throw",
    "wait",
    "dart-throw",
    "wait",
  ],
  imposSequence: [
    "charge",
    "leave",
    "wait-s",
    "enter",
    "laser-shoot",
    "wait-s",
    "laser-shoot",
    "wait-s",
    "laser-shoot",
    "wait-s",
    "laser-shoot",
    "wait-s",
    "charge",
    "leave",
    "laser-rotation",
    "wait",
    "wait-s",
    "enter",
    "laser-shoot",
    "wait-s",
    "laser-shoot",
    "wait-s",
    "laser-shoot",
    "wait-s",
    "laser-shoot",
    "wait-s",
    "leave",
    "false-charge",
    "wait-s",
    "false-charge",
    "wait-s",
    "false-charge",
    "wait-s",
    "enter",
  ],
  team: "enemy",
  health: 150,
  healthIncrease: 100,
  trackingOffsetX: 0,
  turnWhileMoving: true,
  turnSpeed: 4,
  deathSound: "boss-death",
});
//### FINAL BOSSES ###
Registry.entities.add("robo-monkey", {
  type: "final-boss",
  name: "Robo-Monkey",
  model: {
    displayWidth: 276,
    displayHeight: 160,
    parts: {
      rarm: {
        image: "final-boss.robo-monkey.right-arm",
        width: 103,
        height: 38,
        y: 30,
        x: 45,
        direction: 140,
        slide: 52,
      },
      larm: {
        image: "final-boss.robo-monkey.left-arm",
        width: 103,
        height: 38,
        y: -30,
        x: 45,
        direction: -140,
        slide: 52,
      },
      lgun: {
        image: "final-boss.robo-monkey.gun-arm",
        width: 81,
        height: 50,
        slide: -70,
        anchor: "larm",
      },
      main: { image: "final-boss.robo-monkey", width: 276, height: 160 },
      lshot: {
        hidden: true,
        slide: 42,
        anchor: "larm",
      },
      rshot: {
        hidden: true,
        slide: 42,
        anchor: "rarm",
      },
    },
    animations: {
      "aim-larm": [
        {
          part: "larm",
          drot: 130,
          duration: 20,
        },
        {
          part: "lgun",
          dslide: 90,
          duration: 20,
        },
        {
          part: "lgun",
          dslide: -90,
          duration: 20,
          delay: 120,
        },
        {
          part: "larm",
          drot: -130,
          duration: 20,
          delay: 140,
        },
      ],
      "aim-al-.3": [
        {
          part: "rarm",
          drot: -16,
          duration: 10,
        },
        {
          part: "rarm",
          drot: -33,
          duration: 10,
          delay: 75,
        },
        {
          part: "rarm",
          drot: 49,
          duration: 10,
          delay: 180,
        },
      ],
    },
  },
  bounceable: false,
  hitSize: 120,
  direction: 180,
  speed: 10,
  x: 1920,
  y: 0,
  healthColour: [234, 84, 232],
  reward: 500,
  actions: {
    "rarm-glow": {
      type: "action.vfx",
      part: "rshot",
      effect: "laser-charge-mini",
      delay: 8,
    },
    "laser-beam": {
      type: "action.fire-weapon",
      slotIndex: 0,
      duration: 75,
    },
    "laser-beam-impos": {
      type: "action.fire-weapon",
      slotIndex: 1,
      duration: 75,
    },
    "wait-3s": {
      type: "action.generic",
      duration: 180,
    },
    "wait-.5s": {
      type: "action.generic",
      duration: 30,
    },
    "wait-1s": {
      type: "action.generic",
      duration: 60,
    },
    "wait-2s": {
      type: "action.generic",
      duration: 120,
    },
    retarget: {
      type: "action.change-speed",
      speed: 20,
      turnSpeed: 4,
      changesBack: true,
      duration: 30,
    },
    "speed.aim": {
      type: "action.change-speed",
      speed: 2,
      turnSpeed: 0,
      changesBack: false,
    },
    "speed.normal": {
      type: "action.change-speed",
      speed: 10,
      turnSpeed: 4,
      changesBack: false,
    },
    spin: {
      type: "action.move",
      rot: 1440,
      duration: 60,
    },
    "summon-top": {
      type: "action.summon",
      entity: "robo-drone",
      offsetY: -50,
      differences: {
        trackingOffsetY: -500,
      },
      max: 1,
    },
    "summon-bottom": {
      type: "action.summon",
      entity: "robo-drone",
      offsetY: 50,
      differences: {
        trackingOffsetY: 500,
      },
      max: 1,
    },
    airlaser: {
      type: "action.multi",
      actions: ["al", "rarm-glow"],
      duration: 1,
    },
    al: {
      animation: "aim-al-.3",
      type: "action.spawn-bullet",
      x: 800,
      y: 0,
      xVar: 800,
      direction: 90,
      bullet: {
        drawer: {
          image: "minion.drone",
          width: 159,
          height: 120,
        },
        spawnSound: "whirr",
        speed: 0,
        lifetime: 120,
        collides: false,
        trail: false,
        followsSource: true,
        intervalTime: 999,
        intervalNumber: 1,
        intervalOffset: 70,
        intervalBullet: {
          type: "continuous-laser",
          spawnSound: "laser-beam",
          lifetime: 45,
          length: 1080,
          pierce: 999,
          hitSize: 30,
          drawer: {
            shape: "rect",
            fill: [255, 50, 50],
          },
          damage: [
            {
              amount: 5,
              type: "laser",
            },
          ],
          telegraph: {
            time: 75,
            width: 0,
            createEffect: "laser-charge",
          },
        },
      },
    },
    gate: {
      type: "action.spawn-bullet",
      x: 800,
      y: 540,
      xVar: 800,
      direction: 90,
      bullet: {
        type: "shield-wall",
        strength: 300,
        lifetime: 15,
        growth: 10,
        width: 50,
        colourTo: [234, 74, 214, 150],
        trailColourFrom: [255, 144, 175],
        trailColourTo: [121, 0, 255],
      },
    },
    "airlaser-impos": {
      type: "action.spawn-bullet",
      animation: "aim-al-.3",
      x: 800,
      y: 0,
      xVar: 800,
      direction: 90,
      bullet: {
        drawer: {
          image: "minion.drone",
          width: 159,
          height: 120,
        },
        spawnSound: "whirr",
        speed: 0,
        lifetime: 120,
        collides: false,
        trail: false,
        followsSource: true,
        intervalTime: 999,
        intervalNumber: 1,
        intervalOffset: 70,
        intervalBullet: {
          type: "continuous-laser",
          spawnSound: "laser-beam",
          lifetime: 45,
          length: 1080,
          pierce: 999,
          hitSize: 30,
          drawer: {
            shape: "rect",
            fill: [255, 50, 50],
          },
          damage: [
            {
              amount: 5,
              type: "laser",
            },
          ],
          intervalNumber: 1,
          intervalTime: 120,
          intervalBullet: {
            lifetime: 45,
            speed: 24,
            collides: false,
            trail: false,
            pierce: 100,
            intervalTime: 9,
            intervalNumber: 2,
            intervalSpacing: 180,
            intervalBullet: {
              trailColour: [255, 100, 100],
              lifetime: 48,
              speed: 40,
              hitSize: 5,
              trail: true,
              damage: [
                {
                  type: "laser",
                  amount: 5,
                },
              ],
              drawer: {
                fill: "white",
                shape: "ellipse",
                width: 32,
                height: 16,
              },
              telegraph: {
                time: 5,
                width: 1,
              },
            },
          },
          telegraph: {
            time: 75,
            width: 0,
            createEffect: "laser-charge",
          },
        },
      },
    },
    "gate-impos": {
      type: "action.spawn-bullet",
      x: 800,
      y: 540,
      xVar: 800,
      direction: 90,
      bullet: {
        type: "shield-wall",
        strength: 500,
        lifetime: 15,
        growth: 10,
        width: 50,
        colourTo: [234, 74, 214, 150],
        trailColourFrom: [255, 144, 175],
        trailColourTo: [121, 0, 255],
      },
    },
    dart: {
      type: "action.fire-bullet",
      part: "lshot",
      spread: 15,
      amount: 5,
      delay: 20,
      bullet: {
        type: "missile",
        trailColour: [255, 169, 207],
        trailColourTo: [212, 0, 255],
        trailShape: "rhombus",
        targetType: "nearest",
        turnSpeed: 0.25,
        trailInterval: 5,
        trailWidth: 5,
        lifetime: 90,
        speed: 25,
        hitSize: 5,
        trail: true,
        damage: [
          {
            type: "ballistic",
            amount: 5,
          },
          {
            type: "no",
            amount: 0,
            area: 40,
            smokeColour: [0, 0, 0, 0],
            smokeColourTo: [0, 0, 0, 0],
            waveColour: [255, 255, 255, -2000],
            sparkColour: [255, 169, 207],
            sparkColourTo: [212, 0, 255],
          },
        ],
        drawer: {
          image: "bullet.normal", //should really be a dart but i don't have the asset
          width: 32,
          height: 16,
        },
      },
    },
    "dart-throw": {
      type: "action.sequence",
      duration: 100,
      animation: "aim-larm",
      sequence: ["dart", "wait-.5s", "dart", "wait-.5s", "dart", "wait-.5s", "dart"],
    },
    "dart-throw-impos": {
      animation: "aim-larm",
      type: "action.fire-bullet",
      part: "lshot",
      delay: 20,
      bullet: {
        type: "Bullet",
        lifetime: 100,
        speed: 10,
        pierce: 9999999,
        hitSize: 10,
        trail: true,
        intervalBullet: {
          type: "missile",
          turnSpeed: 360,
          targetType: "nearest",
          fragNumber: 1,
          speed: 0,
          lifetime: 1,
          trail: false,
          fragSpread: 10,
          fragBullet: {
            type: "missile",
            trailColour: [255, 169, 207],
            trailColourTo: [212, 0, 255],
            trailShape: "rhombus",
            targetType: "nearest",
            turnSpeed: 0.5,
            trailInterval: 5,
            trailWidth: 5,
            lifetime: 90,
            speed: 25,
            hitSize: 5,
            trail: true,
            damage: [
              {
                type: "ballistic",
                amount: 3,
              },
              {
                type: "no",
                amount: 0,
                area: 40,
                smokeColour: [0, 0, 0, 0],
                smokeColourTo: [0, 0, 0, 0],
                waveColour: [255, 255, 255, -2000],
                sparkColour: [255, 169, 207],
                sparkColourTo: [212, 0, 255],
              },
            ],
            drawer: {
              image: "bullet.normal", //should really be a dart but i don't have the asset
              width: 32,
              height: 16,
            },
          },
        },
        intervalTime: 2,
        intervalNumber: 1,
        fragSpacing: 72,
        fragNumber: 5,
        fragBullet: {
          type: "continuous-laser",
          spawnSound: "laser-beam",
          lifetime: 30,
          length: 2000,
          pierce: 999,
          hitSize: 7.5,
          drawer: {
            shape: "rect",
            fill: [234, 84, 232],
          },
          damage: [
            {
              amount: 1,
              type: "laser",
            },
          ],
          telegraph: {
            time: 15,
          },
        },
      },
    },
  },
  weaponSlots: [
    {
      upgrades: [".robo-monkey-laser"],
      tier: 1,
    },
    {
      upgrades: [".robo-monkey-laser-impos"],
      tier: 1,
    },
  ],
  sequence: [
    //Main loop
    "wait-3s",
    "dart-throw",
    "wait-1s",
    "3*airlaser",
    "wait-1s",
    "dart-throw",
    "wait-3s",
    "speed.aim",
    "laser-beam",
    "retarget",
    "laser-beam",
    "retarget",
    "laser-beam",
    "speed.normal",
    //1
    "wait-3s",
    "dart-throw",
    "wait-1s",
    "3*airlaser",
    "wait-1s",
    "dart-throw",
    "wait-3s",
    "speed.aim",
    "laser-beam",
    "retarget",
    "laser-beam",
    "retarget",
    "laser-beam",
    "speed.normal",
    //intermission
    "wait-3s",
    "gate",
    //2
    "wait-1s",
    "dart-throw",
    "wait-1s",
    "3*airlaser",
    "wait-1s",
    "dart-throw",
    "wait-3s",
    "speed.aim",
    "laser-beam",
    "retarget",
    "laser-beam",
    "retarget",
    "laser-beam",
    "speed.normal",
    //3 times
    "speed.aim",
    "spin",
    "summon-top",
    "summon-bottom",
    "speed.normal",
  ],
  imposSequence: [
    //Main loop
    "wait-1s",
    "dart-throw-impos",
    "wait-.5s",
    "airlaser-impos",
    "wait-1s",
    "airlaser-impos",
    "wait-1s",
    "airlaser-impos",
    "wait-1s",
    "dart-throw-impos",
    "wait-2s",
    "speed.aim",
    "laser-beam-impos",
    "retarget",
    "laser-beam-impos",
    "retarget",
    "laser-beam-impos",
    "speed.normal",
    //1
    "wait-1s",
    "dart-throw-impos",
    "wait-.5s",
    "airlaser-impos",
    "wait-1s",
    "airlaser-impos",
    "wait-1s",
    "airlaser-impos",
    "wait-1s",
    "dart-throw-impos",
    "wait-1s",
    "speed.aim",
    "laser-beam-impos",
    "retarget",
    "laser-beam-impos",
    "retarget",
    "laser-beam-impos",
    "speed.normal",
    //intermission
    "wait-2s",
    "gate",
    "gate",
    //2
    "wait-.5s",
    "dart-throw-impos",
    "wait-.5s",
    "airlaser-impos",
    "wait-1s",
    "airlaser-impos",
    "wait-1s",
    "airlaser-impos",
    "wait-1s",
    "dart-throw-impos",
    "wait-1s",
    "speed.aim",
    "laser-beam-impos",
    "retarget",
    "laser-beam-impos",
    "retarget",
    "laser-beam-impos",
    "speed.normal",
    //3 times
    "speed.aim",
    "spin",
    "summon-top",
    "summon-bottom",
    "speed.normal",
  ],
  team: "enemy",
  health: 4500,
  trackingOffsetX: 1000,
  turnWhileMoving: false,
  turnSpeed: 4,
  deathSound: "boss-death",
  // destinationWorld: "workshop", //Commented out for win condition
});
Registry.entities.add("robo-drone", {
  type: "boss",
  dv: 0,
  isMinion: true,
  name: "Laser Drone",
  bounceable: false,
  drawer: {
    image: "minion.drone",
    width: 106,
    height: 80,
  },
  hitSize: 40,
  direction: 180,
  speed: 15,
  x: 1920,
  y: 0,
  actions: {
    "laser-beam": {
      type: "action.fire-weapon",
      slotIndex: 0,
      duration: 90,
    },
    "laser-beam-impos": {
      type: "action.fire-weapon",
      slotIndex: 1,
      duration: 90,
    },
    "wait-3s": {
      type: "action.generic",
      duration: 180,
    },
    "wait-1s": {
      type: "action.generic",
      duration: 60,
    },
    "speed.aim": {
      type: "action.change-speed",
      speed: 1,
      turnSpeed: 0,
      changesBack: false,
    },
    "speed.normal": {
      type: "action.change-speed",
      speed: 15,
      turnSpeed: 10,
      changesBack: false,
    },
  },
  weaponSlots: [
    {
      upgrades: [".robo-monkey-laser"],
      tier: 1,
    },
    {
      upgrades: [".robo-monkey-laser-impos"],
      tier: 1,
    },
  ],
  sequence: ["wait-3s", "speed.aim", "laser-beam", "speed.normal"],
  imposSequence: ["wait-1s", "wait-1s", "speed.aim", "laser-beam-impos", "speed.normal"],
  team: "enemy",
  health: 100,
  trackingOffsetX: 100,
  trackingOffsetY: -500,
  turnWhileMoving: true,
  turnSpeed: 10,
  deathSound: "explosion",
});
